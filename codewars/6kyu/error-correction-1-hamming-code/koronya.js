// [JS][6kyu] Error correction #1 - Hamming Code
// error-correction-1-hamming-code
// https://www.codewars.com/kata/5ef9ca8b76be6d001d5e1c3e/train/javascript

const calculateEncode = (char) =>
  char
    .charCodeAt(0)
    .toString(2)
    .padStart(8, '0')
    .split('')
    .map((item) => item + item + item)
    .join('')

const encode = (text) =>
  text
    .split('')
    .map((item) => calculateEncode(item))
    .join('')

const selectMajor = (str) => {
  const zeroCount = str.split('').filter((item) => item === '0').length
  return zeroCount > 1 ? '0' : '1'
}

const decode = (bits) => {
  const bitsLen = bits.length
  const tempArr = []
  for (let i = 0; i < bitsLen; i += 3) {
    tempArr.push(selectMajor(bits.substring(i, i + 3)))
  }
  const resultArr = []
  const tempArrLen = tempArr.length
  for (let i = 0; i < tempArrLen; i += 8) {
    resultArr.push(String.fromCharCode(parseInt(tempArr.slice(i, i + 8).join(''), 2)))
  }
  return resultArr.join('')
}

// encode('hey')
// decode('000111111000111000000000')
// decode(encode('hey'))

// encode('hey') === '000111111000111000000000000111111000000111000111000111111111111000000111'
// encode('The Sensei told me that i can do this kata') ===
//   '000111000111000111000000000111111000111000000000000111111000000111000111000000111000000000000000000111000111000000111111000111111000000111000111000111111000111111111000000111111111000000111111000111111000000111000111000111111000111000000111000000111000000000000000000111111111000111000000000111111000111111111111000111111000111111000000000111111000000111000000000000111000000000000000000111111000111111000111000111111000000111000111000000111000000000000000000111111111000111000000000111111000111000000000000111111000000000000111000111111111000111000000000000111000000000000000000111111000111000000111000000111000000000000000000111111000000000111111000111111000000000000111000111111000111111111000000000111000000000000000000111111000000111000000000111111000111111111111000000111000000000000000000111111111000111000000000111111000111000000000000111111000111000000111000111111111000000111111000000111000000000000000000111111000111000111111000111111000000000000111000111111111000111000000000111111000000000000111'
// encode('T3st') === '000111000111000111000000000000111111000000111111000111111111000000111111000111111111000111000000'
// encode('T?st!%') ===
//   '000111000111000111000000000000111111111111111111000111111111000000111111000111111111000111000000000000111000000000000111000000111000000111000111'

// decode('100111111000111001000010000111111000000111001111000111110110111000010111')

// decode('100111111000111001000010000111111000000111001111000111110110111000010111') === 'hey'
// decode(
//   '000111000111000111000100000111111000111000001000000111111000000111000111000100111000000000000000000111000111000000111111000111111000000111000111000111111000111111111000000111111111000000111111000110111000010111000111000111111000111001000111000000111000000000000000000111111111000111000000000111111000111111111111000111111000111111000000000111111000000111000001000000111000000000001000000111111000111111000111000111111000000111000111000000111000000000000000000111111111000111000000000111111000111000000000000111111000000010000111000111111111000111000000000100111000000000000000000111111000111000000111000000111000000000000000000111111000000000111111000111111000000000000111000111111000111111111000000000111000000000000010000111111000000111000000000111111000111111110111000000111000000000000000000111111111000111000000000111111000111000000000000111111000111000000111000111111111000000111111000000111000000000000000000111111000111000111111000111111000000000000111000111111111000111000000000111111000000000000111',
// ) === 'The Sensei told me that i can do this kata'
// decode('000111000111000111000001000000111111000000111111000111111111000000111011000111111111000111000000') === 'T3st'
// decode('000111000111000111000010000000111111111111011111000111111111000000111111000111101111000111000000000000111000000000000111000000111000000111000111') ===
//   'T?st!%'
